@model Akirs.client.ViewModel.MultipleSalaryUploadViewModel

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_LayoutUser.cshtml";
}
<style>

    .buttonDash {
        background-color: #57ACE7;
        color: white;
    }

        .buttonDash:hover {
            background-color: white;
            color: black;
            border: 2px solid #57ACE7;
        }

    .bg-modalforedit {
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        position: absolute;
        top: 0;
        display: none;
        justify-content: center;
        align-items: center;
    }

    .modal-contentforedit {
        width: 500px;
        height: 100%;
        background-color: white;
        border-radius: 4px;
        text-align: center;
        padding: 20px;
    }

    .bg-modal {
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        position: absolute;
        top: 0;
        display: none;
        justify-content: center;
        align-items: center;
    }

    .modal-content {
        width: 400px;
        height: 250px;
        background-color: white;
        border-radius: 4px;
        text-align: center;
        padding: 20px;
    }
</style>
<div class="container-fluid">
    <div class="row">
        <div class="col-lg-12">
        </div>
    </div>
    <div class="row" style="margin:10px">
        <div class="col-lg-12">
            <div class="alert alert-dismissible fade in noty" role="alert" style="display:none">
                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                    <span aria-hidden="true">×</span>
                </button>
                <span class="notyMsg">
                </span>
            </div>

        </div>

        <div class="col-lg-12">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h1>  <i class="fa fa-list" style="color:#57ACE7;"></i>Payroll Upload</h1>
                    @{
                        var message = TempData["AlertMessage"] ?? string.Empty;
                    }
                </div>
                <div class="panel-body ">
                    <div class="col-lg-12">
                        <div style="display:flex; justify-content: space-between">
                            @*<ul class="nav nav-pills">
                                    <li class="nav-item active">
                                        <a class="nav-link " id="home-tab-md" data-toggle="tab" href="#home-md" role="tab" aria-controls="home-md"
                                           aria-selected="true">Upload</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" id="profile-tab-md" data-toggle="tab" href="#profile-md" role="tab" aria-controls="profile-md"
                                           aria-selected="false">
                                            Edit Uploaded
                                        </a>
                                    </li>
                                </ul>*@
                            <input type='button' value='Back to Dashboard' class="btn btn-dark buttonDash" onClick='dashboardbackOnClick()' />
                        </div>

                        <div class="tab-content clearfix">
                            <div class="tab-pane active" id="home-md">
                                <div style="display:flex;justify-content:space-between;background-color:#F4F4F4;margin-bottom:10px;padding:10px">
                                    @using (Html.BeginForm("", "", FormMethod.Post, new { id = "formUpload", }))
                                    {
                                        @Html.AntiForgeryToken()
                                        @Html.TextBox("upldfile", "", new { @style = "display:inline", type = "file" })
                                        @Html.Hidden("hidEnrollId")
                                        <button id="btnUpload" class="btn btn-default pull-righta"><i class="fa-upload fa"></i>Upload</button>
                                        @*<button id="btnValidate" class="btn btn-info pull-righta" disabled><i class="fa-cog fa"></i> Validate/Save</button>*@
                                        <a style="color:#E67819" class="btn btn-default btn-xs" href="@Url.Content("~/Template/payrolltemp.xlsx")"><i class="fa fa-file-excel-o"></i>  Download Payroll Upload Template</a>


                                        @*<button id="btnPay" class="btn btn-info pull-righta" style="margin-left:295px"  onclick="verify2()"><i class="fa-check fa"></i> PAY</button>
                                            <div class="clearfix"></div>*@
                                    }
                                </div>
                                <div id="divGrid">
                                    <div class="table-responsive divad2a">
                                        <table id="example1" class="table table-striped datatable table-condensed table-bordered familytable">
                                            <thead>
                                                <tr>
                                                    <th>Action</th>
                                                    <th>EmployeeID</th>
                                                    <th>EmployeeName</th>
                                                    <th>AnnualBasic</th>
                                                    <th>AnnualHousing</th>
                                                    <th>AnnualTransport</th>
                                                    <th>AnnualMeal</th>
                                                    <th>AnnualOthers</th>
                                                    <th>NHFContribution</th>
                                                    <th>STATUS</th>
                                                    <th>ACTION</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                @{
                                                    var cnt = 0;
                                                    foreach (var d in Model.SalaryList)
                                                    {
                                                        cnt++;
                                                        <tr>
                                                            @*<td><input type="checkbox" id=""/>    &nbsp;  </td>*@
                                                            <td> @cnt </td>

                                                            <td> @d.EmployeeID</td>
                                                            <td> @d.EmployeeName</td>
                                                            <td> @d.AnnualBasic</td>
                                                            <td> @d.AnnualHousing</td>
                                                            <td> @d.AnnualTransport</td>
                                                            <td> @d.AnnualMeal</td>
                                                            <td> @d.AnnualOthers</td>
                                                            <td> @d.NHFContribution</td>
                                                            <td style="text-align:center">@d.PayrollStatus</td>
                                                            <td>
                                                                <button class="editPopup btn btn-primary">Edit</button>
                                                            </td>
                                                            @*@using (Html.BeginForm("GetDetailsForEdit", "UserSalary"))
                                                                {
                                                                    <input type="hidden" name="EmployeeID" value="@d.EmployeeID" />
                                                                    <input type="submit" value="Edit" class="btn btn-primary pull-righta" />
                                                                }*@

                                                        </tr>
                                                    }
                                                }
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                                <div class="col-lg-1">
                                    @using (Html.BeginForm("SendPayeeForApproval", "UserSalary"))
                                    {
                                        @*<input type="hidden" name="EmployeeID" value="@employeeId" />*@
                                        <input id="modal" type="submit" value="Send For Approval" class="btn btn-info pull-righta" />
                                    }

                                </div>
                            </div>

                            <!-- EDIT MODAL-->

                            <div class="bg-modalforedit">
                                @using (Html.BeginForm("DetailsForEdit", "UserSalary", FormMethod.Post))
                                {
                                    <div class="modal-contentforedit">
                                        <div class="form-group">
                                            <label class="control-label">EmployeeID</label>
                                            <div>
                                                @*@Html.EditorFor(m => m.Salary.EmployeeName)*@
                                                <input type="text" name="EmployeeID" value="" placeholder="" class="form-control" />
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="control-label">Employee Name</label>
                                            <div>
                                                @*@Html.EditorFor(m => m.Salary.EmployeeName)*@
                                                <input type="text" name="EmployeeName" value="" placeholder="" class="form-control" />
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="control-label">Annual Basic</label>
                                            <div>
                                                @*@Html.EditorFor(m => m.Salary.AnnualBasic)*@
                                                <input type="text" name="AnnualBasic" value="" placeholder="" class="form-control" />
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="control-label">Annual Transport</label>
                                            <div>
                                                @*@Html.EditorFor(m => m.Salary.AnnualTransport)*@
                                                <input type="text" name="AnnualTransport" value="" placeholder="" class="form-control" />
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="control-label">Annual Meal</label>
                                            <div>
                                                @*  @Html.EditorFor(m => m.Salary.AnnualMeal)*@
                                                <input type="text" name="AnnualMeal" value="" placeholder="" class="form-control" />
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label control-label">Annual Others</label>
                                            <div>
                                                @*@Html.EditorFor(m => m.Salary.AnnualOthers)*@
                                                <input type="text" name="AnnualOthers" value="" placeholder="" class="form-control" />
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="control-label">NHFContribution</label>
                                            <div>
                                                @*@Html.EditorFor(m => m.Salary.NHFContribution)*@
                                                <input type="text" name="NHFContribution" value="" placeholder="" class="form-control" />
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="control-label">Annual Housing<span class="required"> *</span></label>
                                            <div>
                                                <div class="">
                                                    @*@Html.EditorFor(m => m.Salary.AnnualHousing)*@
                                                    <input type="text" id="AnnualHousing" name="AnnualHousing" value="" class="form-control" />
                                                    <input type="hidden" id="ItbID" name="ItbID" />
                                                    <input type="hidden" id="EnrollmentID" name="EnrollmentID" value="" />

                                                </div>
                                            </div>
                                        </div>
                                        <div>
                                            <input type="submit" value="Update" class="btn btn-info pull-righta" />
                                            <button id="close" class="btn btn-info">Cancel</button>
                                        </div>
                                    </div>
                                }
                            </div>

                        </div>
                    </div>
                </div>
            </div>

            <!-- Modal Section-->
            <div class="bg-modal">
                <div class="modal-content">
                    <img src="~/Content/sweetalert/1024px-OOjs_UI_icon_bell-destructive.svg(small).png" />
                    <h3>
                        @message
                    </h3>
                    <div style="padding-top:50px">
                        <button id="closemodal" class="btn btn-primary">OK</button>
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>

<div id="salaryvalidate" style="display:none" data-request-url="@Url.Action("Validate", "UserSalary")"></div>
<div id="salaryupload" style="display:none" data-request-url="@Url.Action("UploadFiles", "UserSalary")"></div>
<div id="downloadtemp" style="display:none" data-request-url="@Url.Action("GetPaymentSampleTemplate", "UserSalary")"></div>
<div id="usersalarylist" style="display:none" data-request-url="@Url.Action("SalList", "UserSalary")"></div>
<div id="usersalaryviewdetails" style="display:none" data-request-url="@Url.Action("ViewDetail", "UserSalary")"></div>
<div id="usersalaryviewdeletedetails" style="display:none" data-request-url="@Url.Action("DeleteDetail", "UserSalary")"></div>
<div id="usersalarycreate" style="display:none" data-request-url="@Url.Action("Create", "UserSalary")"></div>
@*<div id="btnPay" style="display:none" data-request-url="@Url.Action("Create", "UserSalary")"></div>*@
@section Scripts {
    <script type="text/javascript">
        var popup = function ()
        {
            var modal = document.querySelector(".bg-modal");
                        modal.style.display = "flex";
           // console.log("Hello World");
        }
        var message = '@message';
        if (message)
             popup();
    </script>
    <script>
        document.querySelector("#closemodal").addEventListener("click",
            function () {
                var modal = document.querySelector(".bg-modal");
                modal.style.display = "none";
            })
    </script>
    <script>
        var listButtons = document.getElementsByClassName("editPopup");

        for (var i = 0; i < listButtons.length; i++) {
            listButtons[i].addEventListener("click",
                function () {
                    var modal = document.querySelector(".bg-modalforedit");
                    modal.style.display = "flex";
                });
        }
    </script>
    <script>
        document.querySelector("#close").addEventListener("click",
            function () {
                var modal = document.querySelector(".bg-modalforedit");
                modal.style.display = "none";
            })
    </script>
    <script src="~/resources/js/salary.js"></script>
    <script>
        $(document).ready(function () {
            $('#example1').DataTable({
                responsive: true
            });
        });
    </script>
    <script>
        function dashboardbackOnClick() {
            //window.location.href = "http://localhost:27035/UserHome";
            window.location.href = "http://62.173.32.98/Revenuepoint/UserHome";
        }
    </script>
}
